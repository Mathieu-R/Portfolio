{"version":3,"file":"bundle.js","sources":["../../scripts/utils/utils.js","../../scripts/components/toast.js","../../scripts/sw-install.js","../../scripts/components/sidenav.js","../../node_modules/idb-keyval/idb-keyval.js","../../scripts/components/contact.js","../../scripts/app.js"],"sourcesContent":["export function rafPromise() {\n  return new Promise(resolve => requestAnimationFrame(resolve));\n};\n\nexport function transitionEndPromise(el) {\n  return new Promise(resolve => {\n    const te = _ => {\n      el.removeEventListener('transitionend', te);\n      resolve();\n    }\n    el.addEventListener('transitionend', te);\n  });\n};\n\nexport function loadScript(url) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = url;\n    script.setAttribute('async', true);\n    script.onload = resolve;\n    script.onerror = reject;\n    document.body.appendChild(script);\n  });\n}\n","class Toast {\n  static Push(message) {\n    const container = document.querySelector('.toast-container');\n    const toast = document.createElement('div');\n    const toastContent = document.createElement('p');\n    toast.classList.add('toast');\n    toastContent.classList.add('toast-content');\n    toastContent.textContent = message;\n\n    container.appendChild(toast);\n    toast.appendChild(toastContent);\n\n    setTimeout(() => toast.classList.add('hide'), 3000);\n    toast.addEventListener('transitionend', evt => evt.target.parentNode.removeChild(evt.target));\n  }\n}\n\nexport default Toast;\n","import Toast from './components/toast.js';\n\nexport function serviceWorkerInstall() {\n  if (!('serviceWorker' in navigator)) {\n    return;\n  }\n\n  navigator.serviceWorker.onmessage = evt => {\n    if (evt.data.type === 'version') {\n      console.log(`Service Worker updated to version ${evt.data.version}`);\n      Toast.Push('Portfolio updated. Refresh to get the new version.');\n      return;\n    }\n\n    if (evt.data.type === 'cached') {\n      Toast.Push('Portfolio cached. Future visit will work offline !');\n      return;\n    }\n  };\n\n  navigator.serviceWorker.register('/sw.js', {'scope': '/'})\n    .then(reg => {\n      reg.onupdatefound = evt => {\n        console.log('A new service worker has been found, installing...');\n\n        reg.installing.onstatechange = evt => {\n          // as the service worker is installed, we can push the message\n          if (evt.target.state === 'activated') {\n            reg.active.postMessage('version');\n          }\n          console.log(`Service Worker ${evt.target.state}`)\n        }\n      }\n    })\n    .catch(error => console.warn(error));\n}\n","class SideNav {\n  constructor() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  }\n\n  static close() {\n    document.querySelector('#toggle_nav').checked = false;\n  }\n\n  addEventListeners() {\n    document.addEventListener('touchstart', this.onTouchStart);\n    document.addEventListener('touchmove', this.onTouchMove);\n    document.addEventListener('touchend', this.onTouchEnd);\n  }\n}\n\nexport default SideNav;\n","(function() {\n  'use strict';\n  var db;\n\n  function getDB() {\n    if (!db) {\n      db = new Promise(function(resolve, reject) {\n        var openreq = indexedDB.open('keyval-store', 1);\n\n        openreq.onerror = function() {\n          reject(openreq.error);\n        };\n\n        openreq.onupgradeneeded = function() {\n          // First time setup: create an empty object store\n          openreq.result.createObjectStore('keyval');\n        };\n\n        openreq.onsuccess = function() {\n          resolve(openreq.result);\n        };\n      });\n    }\n    return db;\n  }\n\n  function withStore(type, callback) {\n    return getDB().then(function(db) {\n      return new Promise(function(resolve, reject) {\n        var transaction = db.transaction('keyval', type);\n        transaction.oncomplete = function() {\n          resolve();\n        };\n        transaction.onerror = function() {\n          reject(transaction.error);\n        };\n        callback(transaction.objectStore('keyval'));\n      });\n    });\n  }\n\n  var idbKeyval = {\n    get: function(key) {\n      var req;\n      return withStore('readonly', function(store) {\n        req = store.get(key);\n      }).then(function() {\n        return req.result;\n      });\n    },\n    set: function(key, value) {\n      return withStore('readwrite', function(store) {\n        store.put(value, key);\n      });\n    },\n    delete: function(key) {\n      return withStore('readwrite', function(store) {\n        store.delete(key);\n      });\n    },\n    clear: function() {\n      return withStore('readwrite', function(store) {\n        store.clear();\n      });\n    },\n    keys: function() {\n      var keys = [];\n      return withStore('readonly', function(store) {\n        // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.\n        // And openKeyCursor isn't supported by Safari.\n        (store.openKeyCursor || store.openCursor).call(store).onsuccess = function() {\n          if (!this.result) return;\n          keys.push(this.result.key);\n          this.result.continue();\n        };\n      }).then(function() {\n        return keys;\n      });\n    }\n  };\n\n  if (typeof module != 'undefined' && module.exports) {\n    module.exports = idbKeyval;\n  } else if (typeof define === 'function' && define.amd) {\n    define('idbKeyval', [], function() {\n      return idbKeyval;\n    });\n  } else {\n    self.idbKeyval = idbKeyval;\n  }\n}());\n","import idb from 'idb-keyval';\nimport Toast from './toast.js';\n\nclass Contact extends HTMLElement {\n  static get observedAttributes() {\n    return [];\n  }\n\n  constructor() {\n    super();\n  }\n\n  connectedCallback() {\n    this.contactForm = this.querySelector('.contact-form');\n    this.onSubmit = this.onSubmit.bind(this);\n    this.contactForm.addEventListener('submit', this.onSubmit);\n  }\n\n  disconnectedCallback() {\n    this.contactForm.removeEventListener('submit', this.onSubmit);\n  }\n\n  async onSubmit(evt) {\n    evt.preventDefault();\n    const data = {\n      name: this.contactForm.fullname.value,\n      mail: this.contactForm.mail.value,\n      subject: this.contactForm.subject.value,\n      message: this.contactForm.message.value\n    };\n\n    if (!('serviceWorker' in navigator && 'SyncManager' in window)) {\n      this.sendDirectly(data);\n    }\n\n    this.sendInTheBackground(data);\n  }\n\n  async sendInTheBackground(data) {\n    try {\n      await idb.set('contact-infos', data);\n      const reg = await navigator.serviceWorker.ready;\n      await reg.sync.register('bg-contact');\n      console.log('[SW] Sync registered');\n    } catch(err) {\n      this.sendDirectly(data);\n    }\n  }\n\n  async sendDirectly(data) {\n    const response = await fetch('/contact', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n\n    const responseJson = await response.json();\n\n    if (responseJson.err) {\n      responseJson.err.forEach(err => console.warn(err));\n      return;\n    }\n\n    Toast.Push(responseJson.success);\n  }\n\n  attributesChangedCallback(name, oldValue, newValue) {\n\n  }\n}\n\nexport default Contact;\n","import {loadScript} from './utils/utils.js';\nimport {serviceWorkerInstall} from './sw-install.js';\nimport Toast from './components/toast.js';\nimport sideNav from './components/sidenav.js';\nimport Contact from './components/contact.js';\n\nclass App {\n  constructor() {\n    this.currentPath = window.location.pathname;\n    this.links = Array.from(document.querySelectorAll('.nav-link'));\n    this.navLinks = Array.from(document.querySelectorAll('.nav-content-link'));\n    this.pageContent = document.querySelector('.content');\n    this.slideUpLinks = ['/activities', '/projects', '/learning'];\n\n    this.onClickLinks = this.onClickLinks.bind(this);\n    this.onChanged = this.onChanged.bind(this);\n    this.loadView = this.loadView.bind(this);\n    this.swapContent = this.swapContent.bind(this);\n    this.hideAreas = this.hideAreas.bind(this);\n    this.slideBackUp = this.slideBackUp.bind(this);\n\n    serviceWorkerInstall();\n    this.initCustomElements();\n    this.addEventListeners();\n  }\n\n  initCustomElements() {\n    if (!('customElements' in window)) {\n      loadScript('/static/js/third_party/webcomponents-lite.js').then(_ => {\n        console.log('custom-elements polyfill added.');\n      });\n    }\n    customElements.define('ptf-contact', Contact);\n  }\n\n  loadView(url) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', url, 'true');\n      xhr.onload = evt => {\n        const newView = evt.target.response;\n        resolve(newView);\n      }\n      xhr.onerror = reject;\n      xhr.responseType = 'document';\n      xhr.send();\n    });\n  }\n\n  swapContent(view, url) {\n    this.hideAreas(url).then(_ => {\n      this.pageContent.removeEventListener('transitionend', this.onSwapTransitionEnd);\n\n      const currentMasthead = document.querySelector('.masthead');\n      const currentContent = document.querySelector('.content');\n\n      const newMasthead = view.querySelector('.masthead');\n      const newContent = view.querySelector('.content');\n\n      // TODO: rework this code\n      if (newMasthead) {\n        if (currentMasthead) {\n          currentMasthead.innerHTML = newMasthead.innerHTML;\n          currentMasthead.className = newMasthead.className;\n        } else {\n          document.body.insertBefore(newMasthead, currentContent);\n        }\n      } else if (!newMasthead && currentMasthead) {\n        document.body.removeChild(currentMasthead);\n      }\n\n      currentContent.innerHTML = newContent.innerHTML;\n      currentContent.className = newContent.className;\n\n      if (this.slideUpLinks.includes(url)) {\n        currentContent.classList.add('slide-down');\n        currentContent.style.willChange = 'transform';\n      }\n\n      // double rAF\n      requestAnimationFrame(_ => {\n        requestAnimationFrame(_ => {\n          if (this.slideUpLinks.includes(url)) {\n            this.slideBackUp().then(_ => {\n              this.pageContent.style.transition = '';\n              this.pageContent.style.willChange = '';\n            });\n          }\n          document.body.classList.remove('hide');\n        });\n      });\n    });\n  }\n\n  slideBackUp() {\n    return new Promise((resolve, reject) => {\n      this.pageContent.style.transition = 'opacity .3s cubic-bezier(0,0,0.3,1), transform .5s cubic-bezier(0,0,0.3,1)'\n      this.pageContent.addEventListener('transitionend', resolve);\n      this.pageContent.classList.remove('slide-down')\n    });\n  }\n\n  hideAreas(url) {\n    return new Promise((resolve, reject) => {\n      this.pageContent.addEventListener('transitionend', resolve);\n      document.body.classList.add('hide');\n    });\n  }\n\n  highlightCurrentLink(url) {\n    this.navLinks.forEach(navLink => {\n      navLink.classList.remove('nav-content-link__active');\n      if (new URL(navLink.href).pathname === url) {\n        navLink.classList.add('nav-content-link__active');\n      }\n    });\n  }\n\n  onChanged() {\n    this.newPath = window.location.pathname;\n    this.currentPath = this.newPath;\n\n    sideNav.close();\n    this.highlightCurrentLink(this.newPath);\n    this.loadView(this.newPath)\n      .then(view => this.swapContent(view, this.newPath))\n      .catch(error => console.warn(error));\n  }\n\n  onClickLinks(evt) {\n    evt.preventDefault();\n    if (new URL(evt.target.href).pathname === window.location.pathname) {\n      return;\n    }\n    history.pushState(null, null, evt.target.href);\n    this.onChanged();\n  }\n\n  addEventListeners() {\n    this.links.forEach(link => link.addEventListener('click', this.onClickLinks));\n    window.addEventListener('popstate', this.onChanged);\n  }\n}\n\nwindow.addEventListener('load', _ => new App());\n"],"names":["loadScript","url","Promise","resolve","reject","script","document","createElement","src","setAttribute","onload","onerror","body","appendChild","Toast","Push","message","container","querySelector","toast","toastContent","classList","add","textContent","addEventListener","evt","target","parentNode","removeChild","serviceWorkerInstall","navigator","serviceWorker","onmessage","data","type","log","version","register","then","reg","onupdatefound","installing","onstatechange","state","active","postMessage","catch","error","console","warn","SideNav","onTouchStart","bind","onTouchMove","onTouchEnd","close","checked","define","Contact","HTMLElement","observedAttributes","contactForm","onSubmit","removeEventListener","preventDefault","fullname","value","mail","subject","window","sendDirectly","sendInTheBackground","idb","set","ready","sync","err","response","fetch","JSON","stringify","responseJson","json","forEach","success","name","oldValue","newValue","App","currentPath","location","pathname","links","Array","from","querySelectorAll","navLinks","pageContent","slideUpLinks","onClickLinks","onChanged","loadView","swapContent","hideAreas","slideBackUp","initCustomElements","addEventListeners","_","xhr","XMLHttpRequest","open","newView","responseType","send","view","onSwapTransitionEnd","currentMasthead","currentContent","newMasthead","newContent","innerHTML","className","insertBefore","includes","style","willChange","transition","remove","navLink","URL","href","newPath","highlightCurrentLink","pushState","link"],"mappings":"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"}