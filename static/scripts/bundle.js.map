{"version":3,"file":"bundle.js","sources":["../../scripts/utils/utils.js","../../scripts/components/toast.js","../../scripts/sw-install.js","../../scripts/components/sidenav.js","../../node_modules/idb-keyval/dist/idb-keyval.mjs","../../scripts/components/contact.js","../../scripts/app.js"],"sourcesContent":["export function rafPromise() {\n  return new Promise(resolve => requestAnimationFrame(resolve));\n};\n\nexport function transitionEndPromise(el) {\n  return new Promise(resolve => {\n    const te = _ => {\n      el.removeEventListener('transitionend', te);\n      resolve();\n    }\n    el.addEventListener('transitionend', te);\n  });\n};\n\nexport function loadScript(url) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = url;\n    script.setAttribute('async', true);\n    script.onload = resolve;\n    script.onerror = reject;\n    document.body.appendChild(script);\n  });\n}\n","class Toast {\n  static Push(message) {\n    const container = document.querySelector('.toast-container');\n    const toast = document.createElement('div');\n    const toastContent = document.createElement('p');\n    toast.classList.add('toast');\n    toastContent.classList.add('toast-content');\n    toastContent.textContent = message;\n\n    container.appendChild(toast);\n    toast.appendChild(toastContent);\n\n    setTimeout(() => toast.classList.add('hide'), 3000);\n    toast.addEventListener('transitionend', evt => evt.target.parentNode.removeChild(evt.target));\n  }\n}\n\nexport default Toast;\n","import Toast from './components/toast.js';\n\nexport function serviceWorkerInstall() {\n  if (!('serviceWorker' in navigator)) {\n    return;\n  }\n\n  navigator.serviceWorker.onmessage = evt => {\n    if (evt.data.type === 'version') {\n      console.log(`Service Worker updated to version ${evt.data.version}`);\n      Toast.Push('Portfolio updated. Refresh to get the new version.');\n      return;\n    }\n\n    if (evt.data.type === 'cached') {\n      Toast.Push('Portfolio cached. Future visit will work offline !');\n      return;\n    }\n  };\n\n  navigator.serviceWorker.register('/sw.js', {'scope': '/'})\n    .then(reg => {\n      if ('SyncManager' in window) {\n        reg.pushManager.getSubscription();\n      }\n\n      reg.onupdatefound = evt => {\n        console.log('A new service worker has been found, installing...');\n\n        reg.installing.onstatechange = evt => {\n          // as the service worker is installed, we can push the message\n          if (evt.target.state === 'activated') {\n            reg.active.postMessage('version');\n          }\n          console.log(`Service Worker ${evt.target.state}`)\n        }\n      }\n    })\n    .catch(error => console.warn(error));\n}\n","class SideNav {\n  constructor() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  }\n\n  static close() {\n    document.querySelector('#toggle_nav').checked = false;\n  }\n\n  addEventListeners() {\n    document.addEventListener('touchstart', this.onTouchStart);\n    document.addEventListener('touchmove', this.onTouchMove);\n    document.addEventListener('touchend', this.onTouchEnd);\n  }\n}\n\nexport default SideNav;\n","class Store {\r\n    constructor(dbName = 'keyval-store', storeName = 'keyval') {\r\n        this.storeName = storeName;\r\n        this._dbp = new Promise((resolve, reject) => {\r\n            const openreq = indexedDB.open(dbName, 1);\r\n            openreq.onerror = () => reject(openreq.error);\r\n            openreq.onsuccess = () => resolve(openreq.result);\r\n            // First time setup: create an empty object store\r\n            openreq.onupgradeneeded = () => {\r\n                openreq.result.createObjectStore(storeName);\r\n            };\r\n        });\r\n    }\r\n    _withIDBStore(type, callback) {\r\n        return this._dbp.then(db => new Promise((resolve, reject) => {\r\n            const transaction = db.transaction(this.storeName, type);\r\n            transaction.oncomplete = () => resolve();\r\n            transaction.onabort = transaction.onerror = () => reject(transaction.error);\r\n            callback(transaction.objectStore(this.storeName));\r\n        }));\r\n    }\r\n}\r\nlet store;\r\nfunction getDefaultStore() {\r\n    if (!store)\r\n        store = new Store();\r\n    return store;\r\n}\r\nfunction get(key, store = getDefaultStore()) {\r\n    let req;\r\n    return store._withIDBStore('readonly', store => {\r\n        req = store.get(key);\r\n    }).then(() => req.result);\r\n}\r\nfunction set(key, value, store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.put(value, key);\r\n    });\r\n}\r\nfunction del(key, store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.delete(key);\r\n    });\r\n}\r\nfunction clear(store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.clear();\r\n    });\r\n}\r\nfunction keys(store = getDefaultStore()) {\r\n    const keys = [];\r\n    return store._withIDBStore('readonly', store => {\r\n        // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.\r\n        // And openKeyCursor isn't supported by Safari.\r\n        (store.openKeyCursor || store.openCursor).call(store).onsuccess = function () {\r\n            if (!this.result)\r\n                return;\r\n            keys.push(this.result.key);\r\n            this.result.continue();\r\n        };\r\n    }).then(() => keys);\r\n}\n\nexport { Store, get, set, del, clear, keys };\n","import { set } from 'idb-keyval';\nimport Toast from './toast.js';\n\nclass Contact extends HTMLElement {\n  static get observedAttributes() {\n    return [];\n  }\n\n  constructor() {\n    super();\n  }\n\n  connectedCallback() {\n    this.contactForm = this.querySelector('.contact-form');\n    this.onSubmit = this.onSubmit.bind(this);\n    this.contactForm.addEventListener('submit', this.onSubmit);\n  }\n\n  disconnectedCallback() {\n    this.contactForm.removeEventListener('submit', this.onSubmit);\n  }\n\n  async onSubmit(evt) {\n    evt.preventDefault();\n    const data = {\n      name: this.contactForm.fullname.value,\n      mail: this.contactForm.mail.value,\n      subject: this.contactForm.subject.value,\n      message: this.contactForm.message.value\n    };\n\n    if (!('serviceWorker' in navigator && 'SyncManager' in window)) {\n      this.sendDirectly(data);\n    }\n\n    this.sendInTheBackground(data);\n  }\n\n  async sendInTheBackground(data) {\n    try {\n      const reg = await navigator.serviceWorker.ready;\n      if (!reg.active) {\n        return;\n      }\n\n      await Notification.requestPermission();\n      await set('contact-infos', data);\n      await reg.sync.register('bg-contact');\n      console.log('[SW] Sync registered');\n    } catch(err) {\n      this.sendDirectly(data);\n    }\n  }\n\n  async sendDirectly(data) {\n    const response = await fetch('/contact', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n\n    const responseJson = await response.json();\n\n    if (responseJson.err) {\n      responseJson.err.forEach(err => console.warn(err));\n      return;\n    }\n\n    Toast.Push(responseJson.success);\n  }\n\n  attributesChangedCallback(name, oldValue, newValue) {\n\n  }\n}\n\nexport default Contact;\n","import {loadScript} from './utils/utils.js';\nimport {serviceWorkerInstall} from './sw-install.js';\nimport Toast from './components/toast.js';\nimport sideNav from './components/sidenav.js';\nimport Contact from './components/contact.js';\n\nclass App {\n  constructor() {\n    this.currentPath = window.location.pathname;\n    this.links = Array.from(document.querySelectorAll('.nav-link'));\n    this.navLinks = Array.from(document.querySelectorAll('.nav-content-link'));\n    this.pageContent = document.querySelector('.content');\n    this.pageContentSections = Array.from(this.pageContent.querySelectorAll('section'));\n    this.slideUpLinks = ['/activities', '/projects', '/learning'];\n\n    this.onClickLinks = this.onClickLinks.bind(this);\n    this.onChanged = this.onChanged.bind(this);\n    this.loadView = this.loadView.bind(this);\n    this.swapContent = this.swapContent.bind(this);\n    this.hideAreas = this.hideAreas.bind(this);\n    this.slideBackUp = this.slideBackUp.bind(this);\n\n    serviceWorkerInstall();\n    this.initCustomElements();\n    this.addEventListeners();\n  }\n\n  initCustomElements() {\n    if (!('customElements' in window)) {\n      loadScript('/static/js/third_party/webcomponents-lite.js').then(_ => {\n        console.log('custom-elements polyfill added.');\n      });\n    }\n    customElements.define('ptf-contact', Contact);\n  }\n\n  loadView(url) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', url, 'true');\n      xhr.onload = evt => {\n        const newView = evt.target.response;\n        resolve(newView);\n      }\n      xhr.onerror = reject;\n      xhr.responseType = 'document';\n      xhr.send();\n    });\n  }\n\n  swapContent(view, url) {\n    this.hideAreas(url).then(_ => {\n      this.pageContent.removeEventListener('transitionend', this.onSwapTransitionEnd);\n\n      const currentMasthead = document.querySelector('.masthead');\n      const currentContent = document.querySelector('.content');\n\n      const newMasthead = view.querySelector('.masthead');\n      const newContent = view.querySelector('.content');\n\n      // TODO: rework this code\n      if (newMasthead) {\n        if (currentMasthead) {\n          currentMasthead.innerHTML = newMasthead.innerHTML;\n          currentMasthead.className = newMasthead.className;\n        } else {\n          document.body.insertBefore(newMasthead, currentContent);\n        }\n      } else if (!newMasthead && currentMasthead) {\n        document.body.removeChild(currentMasthead);\n      }\n\n      currentContent.innerHTML = newContent.innerHTML;\n      currentContent.className = newContent.className;\n\n      this.pageContentSections = Array.from(currentContent.querySelectorAll('section'));\n\n      if (this.slideUpLinks.includes(url)) {\n        this.pageContentSections.forEach(section => {\n          section.classList.add('slide-down');\n          section.style.willChange = 'transform';\n        })\n      }\n\n      // double rAF\n      requestAnimationFrame(_ => {\n        requestAnimationFrame(_ => {\n          if (this.slideUpLinks.includes(url)) {\n            this.slideBackUp();\n          }\n          document.body.classList.remove('hide');\n        });\n      });\n    });\n  }\n\n  slideBackUp() {\n    const onSlideTransitionEnd = evt => {\n      const section = evt.target;\n      section.removeEventListener('transitionend', onSlideTransitionEnd);\n      section.style.transition = '';\n      section.style.willChange = '';\n    }\n\n    this.pageContentSections.forEach(section => {\n      section.style.transition = 'opacity .3s cubic-bezier(0,0,0.3,1), transform .5s cubic-bezier(0,0,0.3,1)'\n      section.addEventListener('transitionend', onSlideTransitionEnd);\n      section.classList.remove('slide-down');\n    });\n  }\n\n  hideAreas(url) {\n    return new Promise((resolve, reject) => {\n      this.pageContent.addEventListener('transitionend', resolve);\n      document.body.classList.add('hide');\n    });\n  }\n\n  highlightCurrentLink(url) {\n    this.navLinks.forEach(navLink => {\n      navLink.classList.remove('nav-content-link__active');\n      if (new URL(navLink.href).pathname === url) {\n        navLink.classList.add('nav-content-link__active');\n      }\n    });\n  }\n\n  onChanged() {\n    this.newPath = window.location.pathname;\n    this.currentPath = this.newPath;\n\n    sideNav.close();\n    this.highlightCurrentLink(this.newPath);\n    this.loadView(this.newPath)\n      .then(view => this.swapContent(view, this.newPath))\n      .catch(error => console.warn(error));\n  }\n\n  onClickLinks(evt) {\n    evt.preventDefault();\n    if (new URL(evt.target.href).pathname === window.location.pathname) {\n      return;\n    }\n    history.pushState(null, null, evt.target.href);\n    this.onChanged();\n  }\n\n  addEventListeners() {\n    this.links.forEach(link => link.addEventListener('click', this.onClickLinks));\n    window.addEventListener('popstate', this.onChanged);\n  }\n}\n\nwindow.addEventListener('load', _ => new App());\n"],"names":["loadScript","url","Promise","resolve","reject","script","document","createElement","src","setAttribute","onload","onerror","body","appendChild","Toast","message","container","querySelector","toast","toastContent","classList","add","textContent","addEventListener","evt","target","parentNode","removeChild","serviceWorkerInstall","navigator","serviceWorker","onmessage","data","type","log","version","Push","register","then","window","pushManager","getSubscription","onupdatefound","installing","onstatechange","state","active","postMessage","catch","console","warn","error","SideNav","onTouchStart","bind","onTouchMove","onTouchEnd","checked","set","Contact","contactForm","onSubmit","removeEventListener","preventDefault","fullname","value","mail","subject","sendDirectly","sendInTheBackground","err","ready","reg","Notification","requestPermission","sync","fetch","JSON","stringify","response","json","responseJson","forEach","success","name","oldValue","newValue","HTMLElement","App","currentPath","location","pathname","links","Array","from","querySelectorAll","navLinks","pageContent","pageContentSections","slideUpLinks","onClickLinks","onChanged","loadView","swapContent","hideAreas","slideBackUp","initCustomElements","addEventListeners","define","xhr","XMLHttpRequest","open","newView","responseType","send","view","onSwapTransitionEnd","currentMasthead","currentContent","newMasthead","newContent","innerHTML","className","insertBefore","includes","style","willChange","remove","onSlideTransitionEnd","section","transition","URL","navLink","href","newPath","close","highlightCurrentLink","pushState","link"],"mappings":"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"}